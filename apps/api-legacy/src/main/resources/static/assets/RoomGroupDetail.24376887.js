import{Q as A}from"./QSpinnerGears.58f532f9.js";import{Q as R}from"./QInnerLoading.5c1f95a1.js";import{a as h,Q as w}from"./format-util.3d0400b0.js";import{a7 as C,cN as D,bE as G,aG as i,X as p,ba as s,a5 as a,a4 as f,F as n,bI as v,_ as e,y as b,bJ as d,cB as k,bM as B,Y as Q,cM as x,k as E,av as $,Z as y}from"./index.cff9ac5d.js";import{d as q,a as N}from"./room-group.730ad2ee.js";import{Q as g}from"./QTd.b726fe35.js";import{Q as F}from"./QTable.5ee997c8.js";import{g as S}from"./room.c1a50005.js";import{c as I}from"./table-util.866aca54.js";import"./_commonjsHelpers.2cf1d77b.js";import"./QVirtualScroll.7365e47a.js";import"./QSelect.fa044258.js";import"./base.359dd365.js";const P={class:"row"},T={class:"col q-py-sm"},L=e("div",{class:"text-caption"},"\uC131\uC218\uAE30 \uC608\uC57D\uAE08",-1),V={class:"text-body1"},M={class:"col q-py-sm"},z=e("div",{class:"text-caption"},"\uBE44\uC131\uC218\uAE30 \uC608\uC57D\uAE08",-1),J={class:"text-body1"},O={class:"row"},X={class:"col"},Y={class:"q-py-sm"},Z=e("div",{class:"text-caption"},"\uBA54\uBAA8",-1),j={class:"text-body1"},H=C({__name:"RoomGroupDetailCard",props:{roomGroup:{}},setup(m){const c=D(),l=G(),r=m;function t(){const u=r.roomGroup.id,o=r.roomGroup.number;l.dialog({title:"\uC0AD\uC81C",message:`\uC815\uB9D0\uB85C '${o}'\uC744 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`,ok:{label:"\uC0AD\uC81C",flat:!0,color:"negative"},cancel:{label:"\uC720\uC9C0",flat:!0},focus:"cancel"}).onOk(()=>{q(u).then(()=>{c.push({name:"RoomGroups"})}).catch(_=>{l.notify({message:_.response.data.message,type:"negative",actions:[{icon:"close",color:"white",round:!0}]})})})}return(u,o)=>(i(),p(B,{flat:"",bordered:""},{default:s(()=>[a(v,{class:"text-h6"},{default:s(()=>[f(n(r.roomGroup.name),1)]),_:1}),a(v,null,{default:s(()=>[e("div",P,[e("div",T,[L,e("div",V,n(b(h)(r.roomGroup.peekPrice)),1)]),e("div",M,[z,e("div",J,n(b(h)(r.roomGroup.offPeekPrice)),1)])]),e("div",O,[e("div",X,[e("div",Y,[Z,e("div",j,n(r.roomGroup.description),1)])])])]),_:1}),a(k,{align:"right"},{default:s(()=>[a(d,{onClick:o[0]||(o[0]=_=>t()),color:"red",label:"\uC0AD\uC81C",dense:"",flat:""}),a(d,{to:{name:"EditRoomGroup",params:{id:r.roomGroup.id}},color:"primary",label:"\uC218\uC815",flat:""},null,8,["to"])]),_:1})]),_:1}))}}),K={class:"row q-gutter-sm"},U=C({__name:"RoomListTable",props:{roomLastStayDetails:{}},setup(m){const c=m,l=[{...r("number"),align:"left",required:!0,sortable:!0,field:t=>t.room.number},{...r("status"),align:"left",headerStyle:"width: 10%",required:!0,sortable:!0,field:t=>t.room.status},{label:"\uCD5C\uADFC \uC608\uC57D \uC815\uBCF4",name:"lastReservation",align:"left",required:!0,sortable:!0},{label:"\uCD5C\uADFC \uD1F4\uC2E4\uC77C",name:"lastStayAt",align:"left",required:!0,sortable:!0,field:t=>{var u;return(u=t.lastReservation)==null?void 0:u.stayEndAt}}];function r(t){return I(S(t))}return(t,u)=>(i(),p(F,{columns:l,rows:c.roomLastStayDetails,"row-key":"id",title:"\uAC1D\uC2E4",flat:"",bordered:"","binary-state-sort":""},{"top-right":s(()=>[e("div",K,[a(d,{to:{name:"CreateRoom"},icon:"add",color:"grey",dense:"",round:"",flat:""})])]),"body-cell-number":s(o=>[a(g,{key:"number",props:o},{default:s(()=>[a(d,{to:{name:"Room",params:{id:o.row.room.id}},class:"full-width",align:"left",color:"primary",dense:"",flat:""},{default:s(()=>[f(n(o.row.room.number),1)]),_:2},1032,["to"])]),_:2},1032,["props"])]),"body-cell-lastReservation":s(o=>[a(g,{key:"lastReservation",props:o},{default:s(()=>[o.row.lastReservation?(i(),p(d,{key:0,to:{name:"Reservation",params:{id:o.row.lastReservation.id}},class:"full-width",align:"left",color:"primary",dense:"",flat:""},{default:s(()=>[f(n(o.row.lastReservation.name),1)]),_:2},1032,["to"])):Q("",!0)]),_:2},1032,["props"])]),_:1},8,["rows"]))}}),W={key:0},oo={key:1,class:"q-gutter-sm"},eo={class:"row"},to={class:"col"},so={class:"row"},ao={class:"col"},bo=C({__name:"RoomGroupDetail",setup(m){const c=x(),l=D(),r=Number.parseInt(c.params.id),t=E(null);function u(){return t.value=null,N(r).then(o=>{t.value=o.value}).catch(o=>{o.response.status===404&&l.push({name:"ErrorNotFound"}),console.log(o)})}return $(()=>{u()}),(o,_)=>(i(),p(w,{padding:""},{default:s(()=>[t.value===null?(i(),y("div",W,[a(R,{showing:!0},{default:s(()=>[a(A,{size:"20vh",color:"primary"})]),_:1})])):(i(),y("div",oo,[e("div",eo,[e("div",to,[a(H,{"room-group":t.value},null,8,["room-group"])])]),e("div",so,[e("div",ao,[a(U,{"room-last-stay-details":t.value.rooms},null,8,["room-last-stay-details"])])])]))]),_:1}))}});export{bo as default};
