import{Q as y}from"./QSpinnerGears.58f532f9.js";import{Q as G}from"./QInnerLoading.5c1f95a1.js";import{Q as N}from"./format-util.3d0400b0.js";import{a7 as D,cN as _,bE as F,k as m,av as Q,aG as d,X as V,ba as n,a5 as a,a4 as x,bI as v,cA as f,y as g,cB as I,bJ as b,bM as k,cM as M,Z as A}from"./index.cff9ac5d.js";import{Q as B}from"./QSelect.fa044258.js";import{Q as S}from"./QForm.8b51be4d.js";import{b as h}from"./room.c1a50005.js";import{p as O,b as U}from"./room.70f71cf9.js";import{i as q,g as w}from"./data-util.507e21cd.js";import{f as T}from"./room-group.730ad2ee.js";import"./_commonjsHelpers.2cf1d77b.js";import"./base.359dd365.js";const L=D({__name:"RoomEditCard",props:{room:{}},setup(c){const p=_(),i=F(),l=c,o=m({isProgress:!1}),s=m(null),e=m({number:"",note:"",status:"NORMAL"}),C={status:[{label:"\uC815\uC0C1",value:"NORMAL"},{label:"\uC774\uC6A9\uBD88\uAC00",value:"INACTIVE"},{label:"\uD30C\uC190",value:"DAMAGED"},{label:"\uACF5\uC0AC \uC911",value:"CONSTRUCTION"}]};function P(){return s.value=null,T().then(r=>{s.value=r.values})}function R(){if(!q(l.room,e.value)){i.notify({message:"\uC218\uC815\uB41C \uD56D\uBAA9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.",type:"info",actions:[{icon:"close",color:"white",round:!0}]});return}o.value.isProgress=!0,O(l.room.id,w(l.room,e.value)).then(()=>{p.push({name:"Room",params:{id:l.room.id}})}).catch(r=>{i.notify({message:r.response.data.message,type:"negative",actions:[{icon:"close",color:"white",round:!0}]})}).finally(()=>{o.value.isProgress=!1})}function E(){Object.assign(e.value,l.room)}return Q(()=>{E(),P().then(()=>{var r;e.value.roomGroup=(r=s.value)==null?void 0:r.find(u=>u.id===l.room.roomGroup.id)})}),(r,u)=>(d(),V(k,null,{default:n(()=>[a(v,{class:"text-h6"},{default:n(()=>[x("\uAC1D\uC2E4 \uC218\uC815")]),_:1}),a(S,{onSubmit:R},{default:n(()=>[a(v,null,{default:n(()=>[a(B,{modelValue:e.value.roomGroup,"onUpdate:modelValue":u[0]||(u[0]=t=>e.value.roomGroup=t),loading:o.value.isProgress||s.value===null,disable:o.value.isProgress||s.value===null,options:s.value,"option-label":"name",label:"\uAC1D\uC2E4 \uADF8\uB8F9",required:"","map-options":""},null,8,["modelValue","loading","disable","options"]),a(f,{modelValue:e.value.number,"onUpdate:modelValue":u[1]||(u[1]=t=>e.value.number=t),loading:o.value.isProgress,disable:o.value.isProgress,rules:g(h).number,label:"\uBC88\uD638",placeholder:"101\uD638",required:""},null,8,["modelValue","loading","disable","rules"]),a(f,{modelValue:e.value.note,"onUpdate:modelValue":u[2]||(u[2]=t=>e.value.note=t),loading:o.value.isProgress,disable:o.value.isProgress,rules:g(h).note,type:"textarea",label:"\uBA54\uBAA8 (\uAD00\uB9AC\uC6A9)",placeholder:"\uBB38\uACE0\uB9AC \uACE0\uC7A5"},null,8,["modelValue","loading","disable","rules"]),a(B,{modelValue:e.value.status,"onUpdate:modelValue":u[3]||(u[3]=t=>e.value.status=t),loading:o.value.isProgress,disable:o.value.isProgress,options:C.status,label:"\uC0C1\uD0DC",required:"","emit-value":"","map-options":""},null,8,["modelValue","loading","disable","options"])]),_:1}),a(I,{align:"right"},{default:n(()=>[a(b,{disable:o.value.isProgress,to:{name:"Rooms"},color:"primary",label:"\uCDE8\uC18C",flat:""},null,8,["disable"]),a(b,{loading:o.value.isProgress,type:"submit",color:"red",label:"\uC218\uC815",flat:""},null,8,["loading"])]),_:1})]),_:1})]),_:1}))}}),$={key:0},j={key:1},le=D({__name:"RoomEdit",setup(c){const p=M(),i=_(),l=Number.parseInt(p.params.id),o=m(null);function s(){return o.value=null,U(l).then(e=>{o.value=e.value}).catch(e=>{e.response.status===404&&i.push({name:"ErrorNotFound"}),console.log(e)})}return Q(()=>{s()}),(e,C)=>(d(),V(N,{padding:""},{default:n(()=>[o.value===null?(d(),A("div",$,[a(G,{showing:!0},{default:n(()=>[a(y,{size:"20vh",color:"primary"})]),_:1})])):(d(),A("div",j,[a(L,{room:o.value},null,8,["room"])]))]),_:1}))}});export{le as default};
