import{b as A}from"./QSelect.fa044258.js";import{Q as _}from"./QTd.b726fe35.js";import{a7 as L,k as i,aA as R,aG as d,X as h,ba as a,a5 as r,y as l,a4 as f,F as p,_ as V,Z as q,aM as x,bM as Q,bI as c,K as S}from"./index.cff9ac5d.js";import{Q as N}from"./QTable.5ee997c8.js";import{c as E}from"./format-util.3d0400b0.js";import{f as F,a as I}from"./reservation.44c609ae.js";import{R as m}from"./revision.fe35f494.js";import{f as M}from"./query-string-util.c7362a05.js";import{b as z}from"./reservation.fe42a8fb.js";const H={class:"row q-gutter-sm"},W=L({__name:"ReservationHistoryDynamicTable",props:{id:{}},setup(w){const B=w,s=i({isLoading:!1,isLoaded:!1,isPatching:!1}),y=i(),T=i(""),t=i({sortBy:"updatedAt",descending:!0,page:1,rowsPerPage:15,rowsNumber:10}),D=[{name:"historyType",field:"historyType",label:"\uD0C0\uC785",align:"left",headerStyle:"width: 10%",required:!0},{name:"updatedValue",field:"updatedValue",label:"\uBCC0\uACBD \uB0B4\uC5ED",align:"left",required:!0},{name:"updatedAt",field:"historyCreatedAt",label:"\uBCC0\uACBD \uC2DC\uAC01",align:"left",headerStyle:"width: 15%",required:!0,sortable:!0,format:E}],g=i();function P(b){const{page:n,rowsPerPage:e,sortBy:o,descending:v}=b.pagination;s.value.isLoading=!0,s.value.isLoaded=!1,z(B.id,{page:n-1,size:e,sort:M({field:o,isDescending:v})}).then(C=>{g.value=C.values;const u=C.page;t.value.rowsNumber=u.totalElements,t.value.page=u.index+1,t.value.rowsPerPage=u.size,t.value.sortBy=o,t.value.descending=v,s.value.isLoaded=!0}).finally(()=>{s.value.isLoading=!1})}function k(){y.value.requestServerInteraction()}return R(()=>{k()}),(b,n)=>(d(),h(N,{onRequest:P,ref_key:"tableRef",ref:y,pagination:t.value,"onUpdate:pagination":n[0]||(n[0]=e=>t.value=e),loading:s.value.isLoading,columns:D,rows:g.value,filter:T.value,"row-key":"id",title:"\uBCC0\uACBD \uC774\uB825",flat:"",bordered:"","binary-state-sort":""},{"body-cell-historyType":a(e=>[r(_,{key:"historyType",props:e},{default:a(()=>[r(A,{icon:l(m)[e.row.historyType].icon,color:l(m)[e.row.historyType].color,outline:""},{default:a(()=>[f(p(l(m)[e.row.historyType].name),1)]),_:2},1032,["icon","color"])]),_:2},1032,["props"])]),"body-cell-updatedValue":a(e=>[r(_,{key:"updatedValue",props:e},{default:a(()=>[V("div",H,[(d(!0),q(S,null,x(e.row.updatedFields,o=>(d(),h(Q,{key:o,bordered:""},{default:a(()=>[r(c,{horizontal:""},{default:a(()=>[r(c,{class:"bg-blue-3 q-pa-xs"},{default:a(()=>[f(p(l(F)(o)),1)]),_:2},1024),r(c,{class:"bg-grey-4 q-pa-xs"},{default:a(()=>[f(p(l(I)(o,e.row.entity[o])),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))])]),_:2},1032,["props"])]),_:1},8,["pagination","loading","rows","filter"]))}});export{W as _};
